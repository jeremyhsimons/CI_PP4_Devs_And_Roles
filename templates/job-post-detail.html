{% extends "base.html" %}
{% block content %}

<h1>{{ jobpost.title }}</h1>
{% if user == jobpost.posted_by %}
<p></p>
    <a class="btn"  href="{% url 'update-job-post' jobpost.pk %}">Edit</a>
</p>
<p>
    <a class="btn red lighten-1"  href="{% url 'delete-job-post' jobpost.pk %}">Delete</a>
</p>
{% endif %}
<p>
    <a class="btn amber" href="{% url 'report-job-post' jobpost.pk %}">Report</a>
</p>
{% if "placeholder" in jobpost.featured_image.url %}
<img src="https://codeinstitute.s3.amazonaws.com/fullstack/blog/default.jpg" alt="default picture of a laptop">
{% else %}
<img src="{{ jobpost.featured_image.url }}" alt="job posting featured image">
{% endif %}
<ul>
    <li>{{ jobpost.salary }}</li>
    <li>{{ jobpost.location }}</li>
    <li>{{ jobpost.closing_date }}</li>
</ul>

<h3>Company overview:</h3>
<p>{{ jobpost.company_overview | safe }}</p>
<h3>Job description:</h3>
<p>{{ jobpost.job_description | safe }}</p>
<h3>Candidate requirements:</h3>
<p>{{ jobpost.requirements | safe }}</p>
<h3>Benefits:</h3>
<p>{{ jobpost.benefits | safe }}</p>

<hr>

{% for profile in userprofiles %}
{% if profile.user == user %}
{% if profile.job_seeker %}
<div class="container card-panel">
    <a class="btn" href="{% url 'apply' jobpost.pk %}">Apply</a>
</div>
{% else %}
<p>You need to update your profile to job seeker if you wish to apply.</p>
{% endif %}
{% endif %}
{% endfor %}

<hr>

<p>posted_by: {{ jobpost.posted_by }}</p>

<hr>

<p>Applicants: {{ jobpost.applicants }}</p>

{% if user == jobpost.posted_by %}
<h3>SEE ALL APPLICATIONS</h3>
{% for application in applications %}
<div class="container card-panel">
    <p>{{ application.full_name }}</p>
    <p>{{ application.email }}</p>
    <p>{{ application.linkedin }}</p>
    <p>
        <a class="btn" href="{% url 'application-detail' application.pk %}">
            Details
        </a>
    </p>
</div>
{% endfor %}
{% endif %}

{% endblock %}